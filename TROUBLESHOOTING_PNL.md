# خطوات استكشاف أخطاء PnL الصفر

## 1. التحقق من مفاتيح API

أولاً، تأكد من أن لديك مفاتيح Binance API مضافة بشكل صحيح:

### الخطوات:
1. اذهب إلى صفحة **الإعدادات** (Settings)
2. أضف **مفتاح API الخاص بك** (Binance API Key)
3. أضف **السر الخاص بك** (Binance API Secret)
4. اضغط **حفظ** (Save)

**ملاحظة**: تأكد من أن المفاتيح لها صلاحيات كافية في Binance (على الأقل قراءة البيانات)

## 2. التحقق من المحفظة

الأسباب المحتملة لظهور PnL = 0:

### أ) محفظة فارغة تماماً
- **الحل**: أضف بعض الأصول إلى محفظتك على Binance (USDT، BTC، ETH، الخ...)

### ب) لا توجد تغييرات سعرية اليوم
- **السبب**: openPrice = lastPrice (السعر الافتتاحي = السعر الحالي)
- **الحل**: انتظر حتى يتغير السعر، أو عدّل محفظتك

### ج) مشاكل في الاتصال
- **الحل**: اضغط "اختبار الاتصال" (Test Connection) وتحقق من الرسائل

## 3. استخدام أدوات المطور (Developer Tools)

لمتابعة العملية تفصيلاً:

### الخطوات:
1. اضغط **F12** لفتح أدوات المطور
2. اذهب إلى تبويب **Console** (الكونسول)
3. اضغط "تحديث" (Refresh) في الموقع
4. انظر إلى الرسائل:

```
✓ Portfolio data received: {
    balances: [...],
    totalValue: "123.45",
    totalDayPnL: "12.34",
    dayPnLPercent: "10.05"
}
```

### الرسائل المتوقعة:

**إذا كل شيء تمام:**
```
Portfolio data received: { totalValue: "...", totalDayPnL: "...", ... }
```

**إذا كانت المحفظة فارغة:**
```
محفظة فارغة
No balances found in your Binance account
```

**إذا كانت مفاتيح API غير موجودة:**
```
مفاتيح API غير موجودة
يرجى إضافة مفاتيح Binance API في صفحة الإعدادات
```

## 4. تصحيح المشاكل الشائعة

### مشكلة: "Unauthorized" أو "Invalid API key"
**السبب**: مفاتيح API غير صحيحة
**الحل**: 
- تحقق من المفاتيح في لوحة التحكم Binance
- تأكد من نسخ المفاتيح بدقة (بدون مسافات)
- إعادة إنشاء المفاتيح إذا لزم الأمر

### مشكلة: قيمة PnL تظهر كـ "+0"
**السبب**: المحفظة فارغة أو لا توجد تغييرات أسعار
**الحل**:
- أضف أصول إلى محفظتك
- انتظر تغييرات الأسعار
- تحقق من الـ console للرسائل التفصيلية

### مشكلة: البيانات لا تتحدث
**السبب**: مشكلة في الاتصال
**الحل**:
- اضغط "تحديث" يدوياً
- تحقق من الاتصال بالإنترنت
- أعد تحميل الصفحة (F5)

## 5. معلومات تقنية

### الحسابات المستخدمة:

```
dayPnL (per asset) = (currentPrice - openPrice) × quantity

totalPreviousValue = sum(quantity × openPrice) لكل asset
totalCurrentValue = sum(quantity × currentPrice) لكل asset
totalDayPnL = totalCurrentValue - totalPreviousValue
totalDayPnLPercent = (totalDayPnL / totalPreviousValue) × 100
```

### البيانات المسترجعة من API:
- **lastPrice**: السعر الحالي
- **openPrice**: سعر الفتح (اليوم)
- **priceChangePercent**: التغيير في السعر (%)
- **balances**: الأصول الموجودة في المحفظة

## 6. للمساعدة الإضافية

إذا استمرت المشاكل:
1. افتح console وانسخ الرسائل
2. تأكد من أن Binance API متاح (ليس مقيداً جغرافياً)
3. تحقق من صلاحيات المفاتيح في لوحة Binance

